<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sign Up</title>
    <link rel="stylesheet" href="assets/css/main.css">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body {
            /* background: #a3bffa; */
        }
        .signup-main {
            min-height: 70vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 0;
        }
        .signup-split-card {
            display: flex;
            flex-direction: row;
            width: 900px;
            min-height: 540px;
            border-radius: 24px;
            overflow: hidden;
            box-shadow: 0 8px 32px rgba(30,41,59,0.10);
            background: none;
        }
        .signup-welcome-side {
            /* Remove background color and use image instead */
            background: url('../images/images/service/signup.jpg') center center/cover no-repeat !important;
            color: #fff;
            flex: 1 1 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 2.5rem 2.5rem;
            border-radius: 0 24px 24px 0;
            width: 50%;
            position: relative;
        }
        .signup-welcome-side::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background: rgba(30,41,59,0.45); /* semi-transparent dark overlay for text contrast */
            border-radius: 0 24px 24px 0;
            z-index: 1;
        }
        .signup-welcome-side .signup-title,
        .signup-welcome-side .signup-subtitle {
            position: relative;
            z-index: 2;
        }
        .signup-form-side {
            background: #fff;
            flex: 1 1 0;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 2.5rem 2.5rem;
            border-radius: 24px 0 0 24px;
            width: 50%;
        }
        .signup-form-side form {
            width: 100%;
            max-width: 320px;
            display: flex;
            flex-direction: column;
            gap: 1.1rem;
            padding-bottom: 1rem;
        }
        .form-group, .password-group {
            position: relative;
            display: flex;
            flex-direction: column;
            align-items: flex-start;
        }
        .input-icon {
            position: absolute;
            left: 0.9rem;
            top: 50%;
            transform: translateY(-50%);
            color: #46807f;
            font-size: 1.2rem;
            pointer-events: none;
            z-index: 2;
        }
        .form-group input {
            width: 100%;
            padding: 0.9rem 1rem 0.9rem 2.5rem;
            border-radius: 10px;
            border: 1.5px solid #e0e0e0;
            background: #f5f7fa;
            font-size: 1rem;
            font-weight: 500;
            transition: border 0.2s, box-shadow 0.2s;
            outline: none;
            margin-top: 0.1rem;
            box-sizing: border-box;
        }
        .form-group label {
            display: block;
            margin-bottom: 0.35rem;
            font-weight: 500;
            color: #222;
            font-size: 1.04rem;
        }
        .signup-btn {
            width: 100%;
            padding: 1rem 0;
            border-radius: 10px;
            background: var(--gradient);
            color: var(--text-light);
            font-size: 1.1rem;
            font-weight: 700;
            border: none;
            margin-top: 0.7rem;
            cursor: pointer;
            transition: background 0.2s;
        }
        .signup-btn:hover {
            background: var(--secondary);
            color: var(--text-light);
        }
        .signup-title {
            font-size: 2.2rem;
            font-weight: 800;
            color: #fff;
            margin-bottom: 1.2rem;
            text-align: center;
            width: 100%;
        }
        .signup-subtitle {
            font-size: 1.2rem;
            color: #e0e0e0;
            margin-bottom: 0;
            text-align: center;
            width: 100%;
        }
        .required { color: #b71c1c; font-weight: bold; }
        .form-group.radio-group {
            grid-column: 1 / -1;
        }
        .radio-label {
            font-weight: 500;
            color: #222;
            font-size: 1.04rem;
            margin-bottom: 0;
            margin-right: 1.2rem;
        }
        .custom-radio {
            display: inline-flex;
            align-items: center;
            margin-right: 1.2em;
            font-size: 1rem;
            cursor: pointer;
            position: relative;
            padding-left: 1.7em;
            margin-bottom: 0;
        }
        .custom-radio input[type="radio"] {
            opacity: 0;
            position: absolute;
            left: 0;
            top: 0.1em;
            width: 1.1em;
            height: 1.1em;
            margin: 0;
            cursor: pointer;
        }
        .custom-radio-indicator {
            position: absolute;
            left: 0;
            top: 0.1em;
            width: 1.1em;
            height: 1.1em;
            border-radius: 50%;
            border: 2px solid #46807f;
            background: #fff;
            box-shadow: 0 1px 2px rgba(70,128,127,0.06);
            transition: border 0.2s, box-shadow 0.2s;
        }
        .custom-radio input[type="radio"]:checked + .custom-radio-indicator {
            background: #46807f;
            border: 2px solid #46807f;
            box-shadow: 0 2px 6px rgba(70,128,127,0.10);
        }
        .custom-radio-indicator:after {
            content: '';
            display: block;
            width: 0.5em;
            height: 0.5em;
            border-radius: 50%;
            background: #fff;
            margin: 0.3em auto;
            opacity: 0;
            transition: opacity 0.2s;
        }
        .custom-radio input[type="radio"]:checked + .custom-radio-indicator:after {
            opacity: 1;
            background: #fff;
        }
        .error {
            color: #b71c1c;
            font-size: 0.97em;
            margin-top: 0.2em;
            font-weight: 500;
        }
        .password-rules {
            font-size: 0.97em;
            color: #555;
            margin-top: 0.2em;
            background: #f1f5fa;
            padding: 0.4em 0.7em;
            border-radius: 6px;
            margin-bottom: 0.2em;
        }
        .terms {
            color: #888;
            font-size: 0.97em;
            text-align: center;
            margin-top: 1.5rem;
            margin-bottom: 0.2rem;
        }
        .form-group.password-group {
            position: relative;
        }
        .form-group.password-group input[type="password"] {
            padding: 0.9rem 1rem 0.9rem 2.5rem;
        }
        .user-type-btn-group {
            display: flex;
            gap: 1rem;
            margin-bottom: 1.2rem;
            width: 100%;
            justify-content: center;
        }
        .user-type-btn-select {
            flex: 1 1 0;
            padding: 0.7rem 0.5rem;
            border-radius: 8px;
            border: 2px solid #3b5bdb;
            background: #fff;
            color: #3b5bdb;
            font-size: 1.08rem;
            font-weight: 600;
            cursor: pointer;
            transition: background 0.2s, color 0.2s, border 0.2s;
        }
        .user-type-btn-select.active, .user-type-btn-select:focus {
            background: #3b5bdb;
            color: #fff;
            border: 2px solid #3b5bdb;
        }
        @media (max-width: 1000px) {
            .signup-split-card {
                width: 98vw;
            }
        }
        @media (max-width: 700px) {
            .signup-split-card {
                flex-direction: column-reverse;
                width: 100vw;
                min-height: 0;
                border-radius: 0;
            }
            .signup-form-side, .signup-welcome-side {
                border-radius: 0;
                min-height: 320px;
                padding: 1.2rem 0.7rem;
            }
            .signup-title {
                font-size: 1.3rem;
            }
            .signup-form-side form {
                max-width: 100%;
            }
        }
        /* Modal styles */
        .signup-modal {
            display: none;
            position: fixed;
            z-index: 2000;
            left: 0; top: 0; right: 0; bottom: 0;
            width: 100vw;
            height: 100vh;
            justify-content: center;
            align-items: center;
        }
        .signup-modal.active {
            display: flex;
        }
        .signup-modal-overlay {
            position: absolute;
            left: 0; top: 0; right: 0; bottom: 0;
            width: 100vw;
            height: 100vh;
            background: rgba(30,41,59,0.25);
            backdrop-filter: blur(6px);
            z-index: 1;
        }
        .signup-modal-content {
            position: relative;
            z-index: 2;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }
        .signup-modal-close {
            position: absolute;
            top: 1.2rem;
            right: 1.2rem;
            background: none;
            border: none;
            font-size: 2rem;
            color: #3b5bdb;
            cursor: pointer;
            z-index: 3;
        }
        body .signup-welcome-side {
            background: url('../images/images/service/signup.jpg') center center/cover no-repeat !important;
            color: #fff !important;
            border: 3px solid red !important;
        }
    </style>
</head>
<body>
    <div id="signupModal" class="signup-modal">
        <div class="signup-modal-overlay"></div>
        <div class="signup-modal-content">
            <button class="signup-modal-close" id="closeSignupModal">&times;</button>
            <div class="signup-split-card">
                <div class="signup-form-side">
                    <form id="signupForm" autocomplete="off">
                        <div class="user-type-btn-group" style="display: flex; gap: 1rem; margin-bottom: 1.2rem; width: 100%; justify-content: center;">
                            <button type="button" class="user-type-btn-select active" id="btnCustomer">Sign up as Customer</button>
                            <button type="button" class="user-type-btn-select" id="btnProvider">Sign up as Service Provider</button>
                            <input type="hidden" id="userType" name="userType" value="customer">
                        </div>
                        <div id="customerFields">
                            <div class="form-group">
                                <span class="input-icon"><i class="fa fa-user"></i></span>
                                <input type="text" id="fullname" name="fullname" placeholder="Full Name" required>
                                <div class="error" id="fullnameError"></div>
                            </div>
                            <div class="form-group">
                                <span class="input-icon"><i class="fa fa-envelope"></i></span>
                                <input type="email" id="email" name="email" placeholder="Email Address" required>
                                <div class="error" id="emailError"></div>
                            </div>
                            <div class="form-group">
                                <span class="input-icon"><i class="fa fa-phone"></i></span>
                                <input type="text" id="phone" name="phone" maxlength="10" placeholder="Phone Number" required>
                                <div class="error" id="phoneError"></div>
                            </div>
                            <div class="form-group">
                                <span class="input-icon"><i class="fa fa-city"></i></span>
                                <input type="text" id="city" name="city" placeholder="City" required>
                                <div class="error" id="cityError"></div>
                            </div>
                            <div class="form-group">
                                <span class="input-icon"><i class="fa fa-map-marker-alt"></i></span>
                                <input type="text" id="district" name="district" placeholder="District" required>
                                <div class="error" id="districtError"></div>
                            </div>
                            <div class="form-group">
                                <span class="input-icon"><i class="fa fa-home"></i></span>
                                <input type="text" id="address" name="address" placeholder="Address" required>
                                <div class="error" id="addressError"></div>
                            </div>
                        </div>
                        <div id="providerFields" style="display:none;">
                            <div class="form-group">
                                <span class="input-icon"><i class="fa fa-user"></i></span>
                                <input type="text" id="providerFullname" name="providerFullname" placeholder="Full Name">
                                <div class="error" id="providerFullnameError"></div>
                            </div>
                            <div class="form-group">
                                <span class="input-icon"><i class="fa fa-envelope"></i></span>
                                <input type="email" id="providerEmail" name="providerEmail" placeholder="Email Address">
                                <div class="error" id="providerEmailError"></div>
                            </div>
                            <div class="form-group">
                                <span class="input-icon"><i class="fa fa-phone"></i></span>
                                <input type="text" id="providerPhone" name="providerPhone" maxlength="10" placeholder="Phone Number">
                                <div class="error" id="providerPhoneError"></div>
                            </div>
                            <div class="form-group">
                                <span class="input-icon"><i class="fa fa-folder-open"></i></span>
                                <input type="file" id="portfolio" name="portfolio" multiple accept="image/*">
                                <div id="portfolioFiles" style="margin-top:0.5rem;"></div>
                                <div class="error" id="portfolioError"></div>
                            </div>
                        </div>
                        <div class="form-group password-group">
                            <span class="input-icon"><i class="fa fa-lock"></i></span>
                            <input type="password" id="password" name="password" placeholder="Password" required>
                            <div class="password-rules">
                                <ul style="margin:0.3em 0 0.2em 1.2em; padding:0; color:#b71c1c; font-size:0.97em;">
                                    <li>At least 8 characters</li>
                                    <li>At least one uppercase letter</li>
                                    <li>At least one lowercase letter</li>
                                    <li>At least one number</li>
                                    <li>At least one special character</li>
                                </ul>
                            </div>
                            <div class="error" id="passwordError"></div>
                        </div>
                        <button type="submit" class="user-type-btn signup-btn" style="margin-bottom: 4rem;">Sign Up</button>
                        <button type="button" onclick="testTermsStep()" style="background: #ff6b35; color: white; border: none; padding: 10px 20px; border-radius: 8px; margin-top: 10px; cursor: pointer; width: 100%; display: block;">Test Terms Step</button>
                        <button type="button" onclick="testForm()" style="background: #28a745; color: white; border: none; padding: 10px 20px; border-radius: 8px; margin-top: 10px; cursor: pointer; width: 100%; display: block;">Test Form</button>
                    </form>
                    <!-- Multi-step signup sections -->
                    <div id="termsStep" style="display:none; margin-top:2rem;">
                        <div style="max-width: 420px; background: #FEFAE0; border-radius: 12px; padding: 2rem 1.5rem; box-shadow: 0 2px 12px rgba(0,0,0,0.07); color: #222;">
                            <h2 style="font-size:1.3rem; font-weight:700; margin-bottom:1.2rem; color:#8A784E;">Terms and Conditions</h2>
                            <div style="font-size:1.01rem; margin-bottom:1.2rem; line-height:1.6;">
                                By proceeding with your booking on Innovista, you agree to the following terms and conditions. All appointments are subject to confirmation based on the availability of the selected service provider. Once a booking is confirmed, it cannot be cancelled for a refund. However, you may request to reschedule your appointment at least 24 hours in advance, subject to the service provider's availability. Refunds will not be issued for cancellations, change of mind, dissatisfaction with design preferences, or delays caused by the customer. Service timelines may vary due to external factors such as weather conditions, supply availability, or prior project delays. Innovista will make reasonable efforts to inform you in advance of any such changes. As a customer, you are responsible for providing accurate contact details and ensuring access to the service location at the agreed time. Innovista connects you with independent service providers and does not take responsibility for any disputes or damages related to their services. By signing up or making a booking, you acknowledge and accept these terms in full.
                            </div>
                            <div style="margin-bottom:1.2rem;">
                                <input type="checkbox" id="acceptTerms"> <label for="acceptTerms">I accept the terms and conditions</label>
                            </div>
                            <button id="termsNextBtn" class="signup-btn" style="width:100%;" disabled>Next</button>
                        </div>
                    </div>
                    <div id="verifyStep" style="display:none; margin-top:2rem;">
                        <div style="max-width: 420px; background: #E7EFC7; border-radius: 12px; padding: 2rem 1.5rem; box-shadow: 0 2px 12px rgba(0,0,0,0.07); color: #222;">
                            <h2 style="font-size:1.2rem; font-weight:700; margin-bottom:1.1rem; color:#8A784E;">Verify Your Account</h2>
                            <div style="font-size:1.01rem; margin-bottom:1.2rem;">Enter the 6-digit verification code sent to your email/phone.</div>
                            <div id="codeInputs" style="display:flex; gap:0.5rem; justify-content:center; margin-bottom:1.2rem;">
                                <input type="text" maxlength="1" class="code-input" style="width:2.2em; height:2.2em; text-align:center; font-size:1.3em; border-radius:6px; border:1.5px solid #B1AB86; background:#fff;" />
                                <input type="text" maxlength="1" class="code-input" style="width:2.2em; height:2.2em; text-align:center; font-size:1.3em; border-radius:6px; border:1.5px solid #B1AB86; background:#fff;" />
                                <input type="text" maxlength="1" class="code-input" style="width:2.2em; height:2.2em; text-align:center; font-size:1.3em; border-radius:6px; border:1.5px solid #B1AB86; background:#fff;" />
                                <input type="text" maxlength="1" class="code-input" style="width:2.2em; height:2.2em; text-align:center; font-size:1.3em; border-radius:6px; border:1.5px solid #B1AB86; background:#fff;" />
                                <input type="text" maxlength="1" class="code-input" style="width:2.2em; height:2.2em; text-align:center; font-size:1.3em; border-radius:6px; border:1.5px solid #B1AB86; background:#fff;" />
                                <input type="text" maxlength="1" class="code-input" style="width:2.2em; height:2.2em; text-align:center; font-size:1.3em; border-radius:6px; border:1.5px solid #B1AB86; background:#fff;" />
                            </div>
                            <button id="verifyBtn" class="signup-btn" style="width:100%;">Verify</button>
                            <div id="verifyError" style="color:#b71c1c; margin-top:0.7em; font-size:1em;"></div>
                        </div>
                    </div>
                    <div id="successStep" style="display:none; margin-top:2rem;">
                        <div style="max-width: 420px; background: #FEFAE0; border-radius: 12px; padding: 2.2rem 1.5rem; box-shadow: 0 2px 12px rgba(0,0,0,0.07); color: #222; text-align:center;">
                            <h2 style="font-size:1.3rem; font-weight:700; margin-bottom:1.2rem; color:#8A784E;">Account Successfully Created!</h2>
                            <div style="font-size:1.08rem; margin-bottom:1.2rem;">Welcome to Innovista. You can now log in and start booking services.</div>
                            <a href="login.html" class="signup-btn" style="width:100%; text-align:center; display:inline-block;">Go to Login</a>
                        </div>
                    </div>
                    <!-- End multi-step signup sections -->
                    <div class="terms">
                        By continuing, you agree to our <a href="#" style="color:#46807f;text-decoration:none;">Terms</a> and <a href="#" style="color:#46807f;text-decoration:none;">Privacy Policy</a>.
                    </div>
                </div>
                <div class="signup-welcome-side">
                    <div class="signup-title">Welcome to Innovista</div>
                    <div class="signup-subtitle">Create your account and discover world-class service providers.</div>
                    <div class="signup-login-message" style="margin-top: 2.2rem; text-align: center; font-size: 1.05rem; color: #fff; text-shadow: 0 1px 6px rgba(0,0,0,0.5);">
                        Already have an account?
                        <a href="login.html" id="loginLink" style="color: #ffd700; text-decoration: underline; font-weight: 600; cursor: pointer;">Login</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script>
    // Mobile menu toggle
    document.addEventListener('DOMContentLoaded', function() {
        // Form submission logic
        const signupForm = document.getElementById('signupForm');
        if (signupForm) {
            signupForm.onsubmit = function(e) {
                e.preventDefault();
                console.log('Form submitted!');
                let valid = true;
                document.querySelectorAll('.error').forEach(el => el.textContent = '');
                
                // Check if user type is selected
                const userType = document.getElementById('userType').value;
                console.log('User type:', userType);
                if (!userType || userType === '') {
                    document.getElementById('userTypeError').textContent = 'Please select user type.';
                    valid = false;
                }
                
                // Only validate fields based on user type
                if (userType === 'customer') {
                    // Customer fields validation
                    const fullname = document.getElementById('fullname').value.trim();
                    if (!fullname) {
                        document.getElementById('fullnameError').textContent = 'Full name is required.';
                        valid = false;
                    }
                    
                    const email = document.getElementById('email').value.trim();
                    if (!email) {
                        document.getElementById('emailError').textContent = 'Email is required.';
                        valid = false;
                    } else if (!email.endsWith('@gmail.com')) {
                        document.getElementById('emailError').textContent = 'Email must be a @gmail.com address.';
                        valid = false;
                    }
                    
                    const city = document.getElementById('city').value.trim();
                    if (!city) {
                        document.getElementById('cityError').textContent = 'City is required.';
                        valid = false;
                    }
                    
                    const district = document.getElementById('district').value.trim();
                    if (!district) {
                        document.getElementById('districtError').textContent = 'District is required.';
                        valid = false;
                    }
                    
                    const address = document.getElementById('address').value.trim();
                    if (!address) {
                        document.getElementById('addressError').textContent = 'Address is required.';
                        valid = false;
                    }
                    
                    const phone = document.getElementById('phone').value.trim();
                    if (!phone) {
                        document.getElementById('phoneError').textContent = 'Phone number is required.';
                        valid = false;
                    } else if (!/^\d{10}$/.test(phone)) {
                        document.getElementById('phoneError').textContent = 'Phone number must be exactly 10 digits.';
                        valid = false;
                    }
                } else if (userType === 'provider') {
                    // Provider fields validation
                    const providerFullname = document.getElementById('providerFullname').value.trim();
                    if (!providerFullname) {
                        document.getElementById('providerFullnameError').textContent = 'Full name is required.';
                        valid = false;
                    }
                    
                    const providerEmail = document.getElementById('providerEmail').value.trim();
                    if (!providerEmail) {
                        document.getElementById('providerEmailError').textContent = 'Email is required.';
                        valid = false;
                    } else if (!providerEmail.endsWith('@gmail.com')) {
                        document.getElementById('providerEmailError').textContent = 'Email must be a @gmail.com address.';
                        valid = false;
                    }
                    
                    const providerPhone = document.getElementById('providerPhone').value.trim();
                    if (!providerPhone) {
                        document.getElementById('providerPhoneError').textContent = 'Phone number is required.';
                        valid = false;
                    } else if (!/^\d{10}$/.test(providerPhone)) {
                        document.getElementById('providerPhoneError').textContent = 'Phone number must be exactly 10 digits.';
                        valid = false;
                    }
                }
                
                // Password validation (common for both)
                const password = document.getElementById('password').value;
                const passwordRules = /^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[!@#$%^&*()_+\-=[\]{};':"\\|,.<>/?]).{8,}$/;
                if (!password) {
                    document.getElementById('passwordError').textContent = 'Password is required.';
                    valid = false;
                } else if (!passwordRules.test(password)) {
                    document.getElementById('passwordError').textContent = 'Password does not meet the requirements.';
                    valid = false;
                }
                
                if (valid) {
                    // Instead of redirect, show terms step
                    console.log('Form is valid, showing terms step...');
                    alert('Form is valid! Attempting to show terms step...');
                    
                    const signupFormElement = document.getElementById('signupForm');
                    const termsStep = document.getElementById('termsStep');
                    console.log('signupForm element:', signupFormElement);
                    console.log('termsStep element:', termsStep);
                    
                    if (signupFormElement && termsStep) {
                        console.log('Both elements found, hiding form and showing terms...');
                        signupFormElement.style.display = 'none';
                        termsStep.style.display = 'block';
                        console.log('Terms step should now be visible');
                        alert('Terms step should be visible now!');
                    } else {
                        console.error('Could not find signupForm or termsStep elements');
                        console.log('Available elements with "terms" in ID:');
                        document.querySelectorAll('[id*="terms"]').forEach(el => console.log(el.id));
                        console.log('Available elements with "signup" in ID:');
                        document.querySelectorAll('[id*="signup"]').forEach(el => console.log(el.id));
                        alert('Error: Could not find form elements. Check console for details.');
                    }
                } else {
                    console.log('Form validation failed');
                    alert('Please fix the form errors before proceeding.');
                }
            };
        }
        
        const navbarToggle = document.getElementById('navbar-toggle');
        const navbarMenu = document.querySelector('.navbar-menu');
        if(navbarToggle && navbarMenu) {
            navbarToggle.addEventListener('click', function() {
                navbarMenu.classList.toggle('active');
            });
        }
        // User type button logic
        const btnCustomer = document.getElementById('btnCustomer');
        const btnProvider = document.getElementById('btnProvider');
        const userTypeInput = document.getElementById('userType');
        const customerFields = document.getElementById('customerFields');
        const providerFields = document.getElementById('providerFields');
        btnCustomer.addEventListener('click', function() {
            btnCustomer.classList.add('active');
            btnProvider.classList.remove('active');
            userTypeInput.value = 'customer';
            customerFields.style.display = '';
            providerFields.style.display = 'none';
        });
        btnProvider.addEventListener('click', function() {
            btnProvider.classList.add('active');
            btnCustomer.classList.remove('active');
            userTypeInput.value = 'provider';
            customerFields.style.display = 'none';
            providerFields.style.display = '';
        });
        // Portfolio file display
        const portfolioInput = document.getElementById('portfolio');
        const portfolioFiles = document.getElementById('portfolioFiles');
        if (portfolioInput) {
            portfolioInput.addEventListener('change', function() {
                portfolioFiles.innerHTML = '';
                for (const file of portfolioInput.files) {
                    const div = document.createElement('div');
                    div.textContent = file.name;
                    portfolioFiles.appendChild(div);
                }
            });
        }
        
        // Terms step logic
        const acceptTerms = document.getElementById('acceptTerms');
        const termsNextBtn = document.getElementById('termsNextBtn');
        if (acceptTerms && termsNextBtn) {
            acceptTerms.addEventListener('change', function() {
                termsNextBtn.disabled = !acceptTerms.checked;
            });
            termsNextBtn.addEventListener('click', function() {
                document.getElementById('termsStep').style.display = 'none';
                document.getElementById('verifyStep').style.display = '';
                // Focus first code input
                document.querySelector('#verifyStep .code-input').focus();
            });
        }
        
        // Verification code logic
        const codeInputs = document.querySelectorAll('#verifyStep .code-input');
        const verifyBtn = document.getElementById('verifyBtn');
        if (codeInputs.length > 0 && verifyBtn) {
            codeInputs.forEach((input, idx) => {
                input.addEventListener('input', function() {
                    if (input.value.length === 1 && idx < codeInputs.length - 1) {
                        codeInputs[idx + 1].focus();
                    }
                });
                input.addEventListener('keydown', function(e) {
                    if (e.key === 'Backspace' && input.value === '' && idx > 0) {
                        codeInputs[idx - 1].focus();
                    }
                });
            });
            verifyBtn.addEventListener('click', function() {
                let code = '';
                codeInputs.forEach(input => code += input.value);
                if (code.length !== 6 || !/^[0-9]{6}$/.test(code)) {
                    document.getElementById('verifyError').textContent = 'Please enter a valid 6-digit code.';
                    return;
                }
                // Simulate success
                document.getElementById('verifyStep').style.display = 'none';
                document.getElementById('successStep').style.display = '';
            });
        }
    });
    // Modal open/close logic
    document.addEventListener('DOMContentLoaded', function() {
        const signupModal = document.getElementById('signupModal');
        const openSignupBtns = document.querySelectorAll('#openSignupModal, .btn-primary[href="signup.html"]');
        const closeSignupModal = document.getElementById('closeSignupModal');
        openSignupBtns.forEach(btn => {
            btn.addEventListener('click', function(e) {
                e.preventDefault();
                signupModal.classList.add('active');
                document.body.style.overflow = 'hidden';
            });
        });
        closeSignupModal.addEventListener('click', function() {
            signupModal.classList.remove('active');
            document.body.style.overflow = '';
        });
        signupModal.addEventListener('click', function(e) {
            if (e.target === signupModal || e.target.classList.contains('signup-modal-overlay')) {
                signupModal.classList.remove('active');
                document.body.style.overflow = '';
            }
        });
        
        // Login link navigation
        document.getElementById('loginLink').addEventListener('click', function(e) {
            e.preventDefault();
            window.location.href = 'login.html';
        });
    });
    
    // Test redirect function
    function testRedirect() {
        console.log('Test redirect clicked');
        alert('Redirecting to terms page...');
        window.location.replace('terms.html?fromSignup=true');
    }
    
    // Direct terms redirect function
    function goToTerms() {
        console.log('Going to terms page directly');
        alert('Going to terms page...');
        window.location.replace('terms.html?fromSignup=true');
    }
    
    // Test function to manually show terms step
    function testTermsStep() {
        console.log('Testing terms step...');
        const signupForm = document.getElementById('signupForm');
        const termsStep = document.getElementById('termsStep');
        console.log('signupForm:', signupForm);
        console.log('termsStep:', termsStep);
        
        if (signupForm && termsStep) {
            signupForm.style.display = 'none';
            termsStep.style.display = 'block';
            console.log('Terms step should be visible now');
            alert('Terms step should be visible!');
        } else {
            console.error('Elements not found');
            alert('Error: Elements not found');
        }
    }
    
    // Test function to check form submission
    function testForm() {
        console.log('Testing form submission...');
        const signupForm = document.getElementById('signupForm');
        console.log('signupForm found:', signupForm);
        
        if (signupForm) {
            console.log('Form has onsubmit:', signupForm.onsubmit);
            // Trigger form submission
            const submitEvent = new Event('submit', { bubbles: true, cancelable: true });
            signupForm.dispatchEvent(submitEvent);
        } else {
            alert('Form not found!');
        }
    }
    </script>
</body>
</html>
